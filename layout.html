<!DOCTYPE html>
<html>
  <head>
    <title>Job Search</title>
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <script>
      document
        .querySelector("#myInput")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            filterJobs();
          }
        });
      function filterJobs() {
        // Declare variables
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("jobTable");
        tr = table.getElementsByTagName("tr");

        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td")[0];
          td1 = tr[i].getElementsByTagName("td")[1];
          td2 = tr[i].getElementsByTagName("td")[2];
          td3 = tr[i].getElementsByTagName("td")[3];
          if (td) {
            txtValue = td.textContent || td.innerText;
            txtValue1 = td1.textContent || td1.innerText;
            txtValue2 = td2.textContent || td2.innerText;
            txtValue3 = td3.textContent || td3.innerText;
            if (
              txtValue.toUpperCase().indexOf(filter) > -1 ||
              txtValue1.toUpperCase().indexOf(filter) > -1 ||
              txtValue2.toUpperCase().indexOf(filter) > -1 ||
              txtValue3.toUpperCase().indexOf(filter) > -1
            ) {
              tr[i].style.display = "";
            } else {
              tr[i].style.display = "none";
            }
          }
        }
      }
    </script>
    <style>
      #myInput {
        width: 100%; /* Full-width */
        font-size: 16px; /* Increase font-size */
        padding: 12px 20px 12px 40px; /* Add some padding */
        border: 1px solid #ddd; /* Add a grey border */
        margin-bottom: 12px; /* Add some space below the input */
      }
    </style>
  </head>
  <body>
    <!-- <h1 class="text-3xl py-4 border-b mb-10">Jobs</h1> -->
    <div class="flex flex-col h-screen">
      <div class="flex-grow overflow-auto">
        <div class="sticky top-0 px-4 py-3 text-gray-800 bg-gray-300">
          <input
            class="border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none"
            type="search"
            name="search"
            placeholder="Filter jobs..."
            id="myInput"
            onkeyup="filterJobs()"
          />
        </div>
        <table
          class="rounded-t-lg m-5 w-5/6 mx-auto bg-gray-200 text-gray-800 relative w-full"
          id="jobTable"
        >
          <thead>
            <tr class="text-left border-b-2 border-gray-300 w-full">
              <th class="sticky top-0 px-4 py-3 text-gray-800 bg-gray-300">
                Title
              </th>
              <th class="sticky top-0 px-4 py-3 text-gray-800 bg-gray-300">
                Location
              </th>
              <th class="sticky top-0 px-4 py-3 text-gray-800 bg-gray-300">
                Salary
              </th>
              <th class="sticky top-0 px-4 py-3 text-gray-800 bg-gray-300">
                Summary
              </th>
            </tr>
          </thead>
          <tbody class="divide-y w-full">
            {{range .}}
            <tr class="bg-gray-100 border-b border-gray-200">
              <td class="px-4 py-3">
                <a href="https://indeed.com/viewjob?jk={{.Id}}">{{.Title}}</a>
              </td>
              <td class="px-4 py-3">{{.Location}}</td>
              <td class="px-4 py-3">{{.Salary}}</td>
              <td class="px-4 py-3">{{.Summary}}</td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
